<template>

<div class="polygon-background">
    <svg  viewBox="0 0 736 461" version="1.1" class="polygons" ref="polygons">
    <defs>
        <polygon id="path-1" points="193.892206 57.0617837 309.528424 291.462266 45.3143261 294.521218"></polygon>
        <filter x="-2.6%" y="-2.1%" width="105.3%" height="105.9%" filterUnits="objectBoundingBox" id="filter-2">
            <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
            <feGaussianBlur stdDeviation="2" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
            <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>
            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>
        </filter>
        <polygon id="path-3" points="371.349995 55.0887634 445.214214 204.081219 222.340038 198.775372"></polygon>
        <filter x="-3.1%" y="-3.4%" width="106.3%" height="109.4%" filterUnits="objectBoundingBox" id="filter-4">
            <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
            <feGaussianBlur stdDeviation="2" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
            <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>
            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>
        </filter>
        <polygon id="path-5" points="257.335694 224.169363 331.796793 373.19526 175.187197 390.47396"></polygon>
        <filter x="-4.5%" y="-3.0%" width="108.9%" height="108.4%" filterUnits="objectBoundingBox" id="filter-6">
            <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
            <feGaussianBlur stdDeviation="2" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
            <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>
            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>
        </filter>
        <polygon id="path-7" points="331.150529 175.09395 412.639236 338.691224 218.156321 320.81377"></polygon>
        <filter x="-3.6%" y="-3.1%" width="107.2%" height="108.6%" filterUnits="objectBoundingBox" id="filter-8">
            <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
            <feGaussianBlur stdDeviation="2" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
            <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>
            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>
        </filter>
        <polygon id="path-9" points="0.0140242728 187.428884 206.866657 350.562827 187.384134 451.419667"></polygon>
        <filter x="-3.4%" y="-1.9%" width="106.8%" height="105.3%" filterUnits="objectBoundingBox" id="filter-10">
            <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
            <feGaussianBlur stdDeviation="2" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
            <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>
            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>
        </filter>
        <polygon id="path-11" points="417.273246 179.653803 358.848474 364.897636 727.390981 168.26003"></polygon>
        <filter x="-1.9%" y="-2.5%" width="103.8%" height="107.1%" filterUnits="objectBoundingBox" id="filter-12">
            <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
            <feGaussianBlur stdDeviation="2" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
            <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>
            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>
        </filter>
        <polygon id="path-13" points="359.216441 366.106939 646.810938 213.147879 631.202098 306.988868"></polygon>
        <filter x="-2.4%" y="-3.3%" width="104.9%" height="109.2%" filterUnits="objectBoundingBox" id="filter-14">
            <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
            <feGaussianBlur stdDeviation="2" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
            <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite>
            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.5 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>
        </filter>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="Main-screen" transform="translate(-696.000000, -191.000000)">
            <g id="Title" transform="translate(1.000000, 87.000000)">
                <g id="Polygon-background" transform="translate(700.000000, 102.000000)">
                    <g class="triangle" transform="translate(177.421375, 175.791501) rotate(39.000000) translate(-177.421375, -175.791501) ">
                        <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>
                        <use fill-opacity="0.828691123" fill="#020202" fill-rule="evenodd" xlink:href="#path-1"></use>
                    </g>
                    <g class="triangle" transform="translate(333.777126, 129.584991) rotate(-258.000000) translate(-333.777126, -129.584991) ">
                        <use fill="black" fill-opacity="1" filter="url(#filter-4)" xlink:href="#path-3"></use>
                        <use fill-opacity="0.828691123" fill="#020202" fill-rule="evenodd" xlink:href="#path-3"></use>
                    </g>
                    <g class="triangle" transform="translate(253.491995, 307.321661) rotate(-374.000000) translate(-253.491995, -307.321661) ">
                        <use fill="black" fill-opacity="1" filter="url(#filter-6)" xlink:href="#path-5"></use>
                        <use fill-opacity="0.828691123" fill="#020202" fill-rule="evenodd" xlink:href="#path-5"></use>
                    </g>
                    <g class="triangle" transform="translate(315.397778, 256.892587) rotate(-438.000000) translate(-315.397778, -256.892587) ">
                        <use fill="black" fill-opacity="1" filter="url(#filter-8)" xlink:href="#path-7"></use>
                        <use fill-opacity="0.828691123" fill="#020202" fill-rule="evenodd" xlink:href="#path-7"></use>
                    </g>
                    <g class="triangle">
                        <use fill="black" fill-opacity="1" filter="url(#filter-10)" xlink:href="#path-9"></use>
                        <use fill-opacity="0.828691123" fill="#020202" fill-rule="evenodd" xlink:href="#path-9"></use>
                    </g>
                    <g class="triangle">
                        <use fill="black" fill-opacity="1" filter="url(#filter-12)" xlink:href="#path-11"></use>
                        <use fill-opacity="0.828691123" fill="#020202" fill-rule="evenodd" xlink:href="#path-11"></use>
                    </g>
                    <g class="triangle">
                        <use fill="black" fill-opacity="1" filter="url(#filter-14)" xlink:href="#path-13"></use>
                        <use fill-opacity="0.828691123" fill="#020202" fill-rule="evenodd" xlink:href="#path-13"></use>
                    </g>
                    <polygon class="triangle" fill-opacity="0.790000021" fill="#000000" points="360.544819 367.165203 630.467918 308.797201 360.544819 462.315652"></polygon>
                </g>
            </g>
        </g>
    </g>
</svg>
  
  <div class="heading" :class="{upperCase: upperCase}" :style="{fontSize}">
    <span class="char" v-for="char in mainSentence">{{char}}</span>
    <span class="char emphasis" v-for="char in lastWord">{{char}}</span>
  </div>
  
</div>
    
</template>

<script>
import { TweenMax, TimelineMax } from "gsap";

export default {
  name: "polygon-heading",
  data() {
    return {
      msg: "Welcome to Your Vue.js App boy"
    };
  },

  props: {
      title: String,
      upperCase: Boolean,
      fontSize: {
        type: String,
        default: '20px'
      }
  },

  computed: {

      mainSentence() {
        let mainSentence =  this.title.split(' ')
        mainSentence.splice(-1, 1)
        return mainSentence.join(' ')
      },

      lastWord() {
          return this.title.split(' ').splice(-1, 1).join()
          
      }
  },

  methods: {
    introTl() {
      let tl = new TimelineMax()
      let triangles = this.$refs.polygons.querySelectorAll('.triangle')
      tl.staggerFrom(triangles, .5, {opacity:0}, .1)
        .staggerFrom(this.$el.querySelectorAll('.heading .char'), .2, {opacity: 0}, .04, 0.3)
      return tl
    }
  }
};
</script>

<style scoped lang="scss">

.polygon-background {
  position: relative;
  display: inline-block;
  color: white;
  font-size: 50px;

  .polygons {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
  }

  .heading {
    position: relative;
    z-index: 1; 
    text-align: right;
    max-width: 8em;
    padding: 3.3em 1.5em 2.3em 1.2em;
    &.upperCase {
      text-transform: uppercase;
      padding: 3.3em 2.3em 2.3em 1.2em;
    }

    .emphasis {
      color: #DD5252;
    }
  }
}
</style>
